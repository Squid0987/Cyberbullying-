<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberbullying Detection Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.9);
            transition: transform 0.3s;
        }
        .card:hover { transform: translateY(-5px); }
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            transition: transform 0.3s;
        }
        .btn-primary:hover { transform: scale(1.05); }
        .theme-toggle {
            cursor: pointer;
            font-size: 1.5rem;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
        }
        .dark-mode .card { background: rgba(0,0,0,0.8); color: #ecf0f1; }
        .alert { border-radius: 10px; }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></div>
    
    <div class="container mt-5">
        <h1 class="text-center mb-4 text-white"><i class="fas fa-shield-alt"></i> Professional Cyberbullying Detection Tool</h1>
        <p class="text-center text-white mb-5">Analyze text for potential cyberbullying using simulated data-driven processing. Powered by HTML and JavaScript.</p>
        
        <div class="row justify-content-center">
            <div class="col-md-8">
                <form id="analysisForm" class="card p-4">
                    <div class="mb-3">
                        <label for="textInput" class="form-label"><i class="fas fa-edit"></i> Enter Text to Analyze</label>
                        <textarea id="textInput" class="form-control" rows="5" placeholder="Paste social media post, message, or text here... (e.g., I hate you, you're stupid!)" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100"><i class="fas fa-search"></i> Analyze</button>
                </form>
                
                <div id="resultCard" class="card mt-4 p-4" style="display: none;">
                    <h3><i class="fas fa-chart-bar"></i> Analysis Result</h3>
                    <p id="resultAlert" class="alert"></p>
                    <h4>Details</h4>
                    <ul id="detailsList"></ul>
                </div>
            </div>
        </div>
        
        <footer class="text-center mt-5 text-white">
            <p><strong>Disclaimer:</strong> This is a simulated demo for educational purposes. Results are not definitive and may not be accurate. For professional use, consult experts or integrate a backend. No data is stored or sent.</p>
        </footer>
    </div>

    <script>
        // Simulated keyword dataset (equivalent to Pandas CSV)
        const bullyingKeywords = ['hate', 'bully', 'threat', 'stupid', 'idiot', 'kill', 'ugly', 'loser', 'die'];
        const keywordCategories = { 'bullying': 3, 'insult': 4, 'threat': 2 };

        // Simple sentiment simulation (mimics TextBlob)
        function getSentiment(text) {
            const negativeWords = ['hate', 'stupid', 'idiot', 'ugly', 'loser', 'kill', 'die', 'threat'];
            let score = 0;
            const words = text.toLowerCase().split(/\s+/);
            words.forEach(word => {
                if (negativeWords.includes(word)) score -= 0.2;
            });
            return Math.max(-1, Math.min(1, score)); // Clamp to -1 to 1
        }

        // Caps ratio heuristic
        function getCapsRatio(text) {
            return text.length > 0 ? (text.match(/[A-Z]/g) || []).length / text.length : 0;
        }

        // Main detection function
        function detectCyberbullying(text) {
            if (!text.trim()) return { result: "No text provided.", summary: {} };
            
            const words = text.toLowerCase().split(/\s+/).filter(word => word.match(/[a-z]/i));
            const matchedKeywords = words.filter(word => bullyingKeywords.includes(word));
            const keywordCount = matchedKeywords.length;
            const sentiment = getSentiment(text);
            const capsRatio = getCapsRatio(text);
            
            const isBullying = (keywordCount > 1) || (sentiment < -0.3) || (capsRatio > 0.5);
            
            const summary = {
                matchedKeywords: matchedKeywords.length > 0 ? matchedKeywords : ['None'],
                sentimentScore: sentiment.toFixed(2),
                capsRatio: capsRatio.toFixed(2),
                totalKeywords: bullyingKeywords.length,
                categories: keywordCategories
            };
            
            const result = isBullying ? "Potential Cyberbullying Detected" : "No Cyberbullying Detected";
            return { result, summary };
        }

        // Form submission handler
        document.getElementById('analysisForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const text = document.getElementById('textInput').value;
            const { result, summary } = detectCyberbullying(text);
            
            // Update result card
            document.getElementById('resultAlert').className = `alert ${result.includes('Potential') ? 'alert-danger' : 'alert-success'}`;
            document.getElementById('resultAlert').innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${result}`;
            
            // Update details list
            const detailsList = document.getElementById('detailsList');
            detailsList.innerHTML = `
                <li><strong>Matched Keywords:</strong> ${summary.matchedKeywords.join(', ')}</li>
                <li><strong>Sentiment Score:</strong> ${summary.sentimentScore} (Negative values indicate potential issues)</li>
                <li><strong>Caps Ratio:</strong> ${summary.capsRatio} (High values may indicate shouting)</li>
                <li><strong>Total Keywords in Dataset:</strong> ${summary.totalKeywords}</li>
                <li><strong>Keyword Categories in Dataset:</strong> ${JSON.stringify(summary.categories)}</li>
            `;
            
            document.getElementById('resultCard').style.display = 'block';
        });

        // Theme toggle
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const icon = document.querySelector('.theme-toggle i');
            icon.className = document.body.classList.contains('dark-mode') ? 'fas fa-sun' : 'fas fa-moon';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
